<!DOCTYPE html>

<!--
  portfolYOU Jekyll theme by Youssef Raafat
  Free for personal and commercial use under the MIT license
  https://github.com/YoussefRaafatNasry/portfolYOU
-->

<html lang="en" class="h-100">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Tech, Gaming, and many other things">

  <title>ITroll.org</title>
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico">

  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">

  <!-- Bootstrap CSS CDN -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

  <!-- Animate CSS CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.css" type="text/css"/>
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/css/style.css" type="text/css">

</head>


<body class="d-flex flex-column h-100">

  <main class="flex-shrink-0 container mt-5">
  <nav class="navbar navbar-expand-lg navbar-light">

  <a class="navbar-brand" href="//"><h5><b>ITroll.org</b></h5></a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav ml-auto">
      
      
        
      
        
      
        
          <a class="nav-item nav-link " href=" /projects/ ">Projects</a>
        
      
        
          <a class="nav-item nav-link  active " href=" /articles/ ">Articles</a>
        
      
        
          <a class="nav-item nav-link " href=" /about/ ">About</a>
        
      
    </div>
  </div>

</nav>
  <div class="col-lg-10 mx-auto mt-5 article">
  <h1><b>...and if the AIX boot partition fails?</b></h1>

<p class="article-metadata text-muted">
  29 May 2012 -  
  <b>
  
  
    2 mins read time
  
  </b>

  <br>

  
    Tags:
    
      <span class="badge badge-pill text-primary border border-primary">AIX</span>
    
  

</p>

First, you need to boot with an AIX installation disk or Diagnostics disk (Virtual I/O bootdisk also works) and go to maintanence mode. Choose the option to give you a shell (mounting rootvg, of course).<br /><!--more-->Just in case, this is a quite dangerous process, so you need to know what you're doing (and so, if you destroy the world, it's your fault, not mine).<br /><br />Now let's see what happens with boot partition:<br /><br /># lslv -l hd5 <br /><br />If there's something wrong with your hd5 boot device, you should create the hd5 again. This process is dangerous, do you have IBM AIX Support ?? if so, please call them.<br />If not, then, because hd5 is seems not to be on disk but in ODM, you have to delete hd5 definitions from ODM, and then create a new boot device.<br /><br />1) Look in ODM for references to hd5 object name<br /><br /># odmget -q name=hd5 CuAt <br /><br />CuAt:<br />name = "hd5"<br />attribute = "lvserial_id"<br />value = "000439211138e3f6.1"<br />type = "R"<br />generic = "D"<br />rep = "n"<br />nls_index = 648<br /><br />CuAt:<br />name = "hd5"<br />attribute = "inter"<br />value = "x"<br />type = "R"<br />generic = "DU"<br />rep = "l"<br />nls_index = 643<br /><br />CuAt:<br />name = "hd5"<br />attribute = "type"<br />value = "boot"<br />type = "R"<br />generic = "DU"<br />rep = "s"<br />nls_index = 639<br /><br />CuAt:<br />name = "hd5"<br />attribute = "size"<br />value = "2"<br />type = "R"<br />generic = "DU"<br />rep = "r"<br />nls_index = 647<br /><br />2) Now, se the objects you have and use odmget, like this:<br /><br /># odmget -q name=hd5 CuDv <br /># odmget -q value3=hd5 CuDvDr <br /># odmget -q name=hd5 CuDep<br /># odmget -q name=hd5 CuVPD<br /><br />3) Take a backup of /etc/objrepos:<br /><br /># odmget CuAt &gt; /backupdir/CuAt.txt <br /># odmget CuDv &gt; /backupdir/CuDv.txt <br /><br />and so on....<br /><br />4) After identifying which ODM DB has references you have to delete any reference with odmdelete:<br /><br /># odmdelete -q name=hd5 -o CuAt <br /># odmdelete -q name=hd5 -o CuDv <br /># odmdelete -q value3=hd5 -o CuDvDr <br /># odmdelete -q name=hd5 -o CuDep <br /># odmdelete -q name=hd5 -o CuVPD <br /><br />4) If you were lucky enough your system is still running, determine the PP size of the disk you want to be hd5. Now use the following command to recreate the boot partition:<br /><br /># mklv -t boot -y hd5 -a e rootvg 1 hdiskXX <br /><br />5) This means create a hd5 boot logical volume on hdiskXX belonging to rootvg size 1 PP. Once you have created hd5 boot partition, you need to reinstate the kernel:<br /><br /># bosboot -ad /dev/ipldevice <br /># bootlist -m normal hdiskXX <br /># syncvg <br /><br />6) Reboot the server, sacrifice a goat and pray.



</div>
  </main>

  <footer class="mt-auto py-3 text-center">

  <small class="text-muted mb-2">
    <i class="fas fa-code"></i> with <i class="fas fa-heart"></i>
    by <strong>Daniel Menelkir</strong>
  </small>

  <div class="container-fluid justify-content-center">

  
  <a class="social twitter mx-1" href="https://www.twitter.com/menelkir">
    <i class="fab fa-1x fa-twitter"></i>
  </a>
  

  
  <a class="social email mx-1" href="mailto:menelkir@itroll.org">
    <i class="fas fa-1x fa-envelope"></i>
  </a>
  

  
  <a class="social github mx-1" href="https://www.github.com/menelkir">
    <i class="fab fa-1x fa-github"></i>
  </a>
  

  
  <a class="social gitlab mx-1" href="https://www.gitlab.com/menelkir">
    <i class="fab fa-1x fa-gitlab"></i>
  </a>
  

  

</div>

</footer>
  <!-- GitHub Buttons -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<!-- jQuery CDN -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Popper.js CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>

<!-- Bootstrap JS CDN -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- wow.js CDN & Activation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.js"></script>
<script> new WOW().init(); </script>

<!-- Card Animation jQuery -->
<script src="/assets/js/card-animation.js"></script>

<!-- Simple-Jekyll-Search CDN -->
<script src="https://cdn.rawgit.com/christian-fei/Simple-Jekyll-Search/master/dest/simple-jekyll-search.min.js"></script>
<script>
  var sjs = SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        searchResultTemplate: '<a href="{url}" class="list-group-item list-group-item-action">{title}</a>',
        noResultsText: '<li class="list-group-item">No results found</li>',
        json: '/search.json'
      })
</script>

</body>

</html>